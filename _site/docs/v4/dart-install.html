<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8" />
    <title>DART Installation</title>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="Jekyll v4.1.1" />
    <link
      rel="alternate"
      type="application/rss+xml"
      title="Ball Aerospace COSMOS News"
      href="/feed.xml"
    />
    <link
      rel="alternate"
      type="application/atom+xml"
      title="Recent commits to COSMOS's master branch"
      href="https://github.com/BallAerospace/COSMOS/commits/master.atom"
    />
    <link
      rel="stylesheet"
      href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic,900"
    />
    <link rel="stylesheet" href="/css/screen.css" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <!--[if lt IE 9]>
      <script src="/js/html5shiv.min.js"></script>
      <script src="/js/respond.min.js"></script>
    <![endif]-->
  </head>

  <body class="wrap">
    <header role="banner">
      <nav class="mobile-nav show-on-mobiles">
        <ul>
          <li class="">
            <a href="/">Home</a>
          </li>
          <li class="current">
            <span class="hide-on-mobiles"
              ><a href="/docs/v4/">Documentation</a></span
            >
            <span class="show-on-mobiles"><a href="/docs/v4/">Docs</a></span>
          </li>
          <li class="">
            <a href="/news/">News</a>
          </li>
          <li>
            <a href="/help/">Help</a>
          </li>
          <li>
            <a href="https://github.com/BallAerospace/COSMOS" target="_blank"
              ><span class="hide-on-mobiles">View on </span>GitHub</a
            >
          </li>
        </ul>
      </nav>
      <div class="grid wider">
        <div class="unit one-third center-on-mobiles" style="margin-top: 27px">
          <h1>
            <a href="/">
              <span class="sr-only">COSMOS</span>
              <img
                src="/img/COSMOS.png"
                width="312"
                height="70"
                alt="COSMOS Logo"
              />
            </a>
          </h1>
        </div>
        <nav class="main-nav unit two-thirds hide-on-mobiles">
          <ul>
            <li class="">
              <a href="/">Home</a>
            </li>
            <li class="current">
              <span class="hide-on-mobiles"
                ><a href="/docs/v4/">Documentation</a></span
              >
              <span class="show-on-mobiles"><a href="/docs/v4/">Docs</a></span>
            </li>
            <li class="">
              <a href="/news/">News</a>
            </li>
            <li>
              <a href="/help/">Help</a>
            </li>
            <li>
              <a href="https://github.com/BallAerospace/COSMOS" target="_blank"
                ><span class="hide-on-mobiles">View on </span>GitHub</a
              >
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <section class="docs">
      <div class="grid wider">
        <div class="unit four-fifths">
          <article>
            <!-- Get version but ignore the "docs" collection -->
            <!-- prettier-ignore -->

            <div class="improve right">
          <span class="version-badge">v4</span>
        </div>

            <div class="toc">
              <ul class="section-nav">
                <li class="toc-entry toc-h5">
                  <a href="#other-possible-dependencies"
                    >Other possible dependencies</a
                  >
                </li>
                <li class="toc-entry toc-h5">
                  <a href="#changing-the-dart-data-file-directory"
                    >Changing the DART Data File Directory</a
                  >
                </li>
                <li class="toc-entry toc-h5">
                  <a href="#shutting-down-dart">Shutting Down DART</a>
                </li>
              </ul>
            </div>

            <h1>DART Installation</h1>
            <ol>
              <li>
                DART requires at least COSMOS version 4.3.0 although you should
                always install the latest to get important bug fixes and feature
                updates. Install the latest COSMOS by running:
                <div class="language-plaintext highlighter-rouge">
                  <div class="highlight">
                    <pre class="highlight"><code>bundle update cosmos
</code></pre>
                  </div>
                </div>
              </li>
              <li>
                Install the PostgreSQL database. DART has been tested with both
                version 9.x and 10.x so we recommend the latest version unless
                you already have a 9.x instance. When installing PostgreSQL you
                must create an overall superuser with a username and password.
                Once you have PostgreSQL installed with the superuser created,
                follow the following steps to configure for DART. (Note that on
                linux you will need to install postgresql and the
                postgresql-server-dev (or equivalent) packages)
              </li>
              <li>
                If you are upgrading an existing COSMOS project perform the
                following steps.
                <ol>
                  <li>
                    Somewhere else on your computer create a new COSMOS demo
                    project:
                    <div class="language-plaintext highlighter-rouge">
                      <div class="highlight">
                        <pre class="highlight"><code>cosmos demo demo
</code></pre>
                      </div>
                    </div>
                  </li>
                  <li>
                    Copy config/dart/Gemfile from the demo project to your
                    COSMOS project
                  </li>
                  <li>
                    Copy config/targets/DART from the demo project to your
                    COSMOS project
                  </li>
                  <li>
                    Add these lines to your config/system/system.txt file:
                    <div class="language-plaintext highlighter-rouge">
                      <div class="highlight">
                        <pre class="highlight"><code>DECLARE_TARGET DART
LISTEN_HOST DART_STREAM 0.0.0.0 # 127.0.0.1 is more secure if you don't need external connections
LISTEN_HOST DART_DECOM 0.0.0.0 # 127.0.0.1 is more secure if you don't need external connections
CONNECT_HOST DART_STREAM 127.0.0.1
CONNECT_HOST DART_DECOM 127.0.0.1
PORT DART_STREAM 8777
PORT DART_DECOM 8779
PATH DART_DATA ./outputs/dart/data
PATH DART_LOGS ./outputs/dart/logs
</code></pre>
                      </div>
                    </div>
                  </li>
                  <li>
                    Add the following line to config/tools/launcher.txt:
                    <div class="language-plaintext highlighter-rouge">
                      <div class="highlight">
                        <pre
                          class="highlight"
                        ><code>TOOL "DART" "LAUNCH_TERMINAL Dart" "dart.png"
</code></pre>
                      </div>
                    </div>
                  </li>
                </ol>
              </li>
              <li>
                Ensure the following line is in your project’s Gemfile:
                <div class="language-plaintext highlighter-rouge">
                  <div class="highlight">
                    <pre
                      class="highlight"
                    ><code># Uncomment this line to add DART dependencies to your main Gemfile
instance_eval File.read(File.join(__dir__, 'config/dart/Gemfile'))
</code></pre>
                  </div>
                </div>
              </li>
              <li>
                Run the following command from your COSMOS project configuration
                directory (not C:/COSMOS which contains Demo &amp; Vendor as
                that is the installation directory) to install all the ruby
                dependencies for DART.
                <div class="language-plaintext highlighter-rouge">
                  <div class="highlight">
                    <pre class="highlight"><code>bundle install
</code></pre>
                  </div>
                </div>
              </li>
              <li>
                In postgres, create a ‘dart’ user and password (with CREATEDB
                permissions), and both a ‘dart’ and ‘darttest’ database (owned
                by the dart user). The databases should be created with
                template0, LC_COLLATE ‘C’, LC_CTYPE ‘C’, and ENCODING
                ‘SQL_ASCII’
                <ol>
                  <li>On windows use pgadmin</li>
                  <li>
                    Otherwise use the psql command line:
                    <div class="language-plaintext highlighter-rouge">
                      <div class="highlight">
                        <pre class="highlight"><code>psql postgres
CREATE ROLE dart WITH LOGIN PASSWORD 'dart';
ALTER ROLE dart CREATEDB;
\q
psql -U dart
CREATE DATABASE dart TEMPLATE template0 LC_COLLATE 'C' LC_CTYPE 'C' ENCODING 'SQL_ASCII';
CREATE DATABASE darttest TEMPLATE template0 LC_COLLATE 'C' LC_CTYPE 'C' ENCODING 'SQL_ASCII';
\q
</code></pre>
                      </div>
                    </div>
                  </li>
                </ol>
              </li>
              <li>
                Create an environment variable on your system named
                DART_USERNAME and set it to ‘dart’. Note you can change this
                username if necessary as long as the postgres username created
                above has the same name.
              </li>
              <li>
                Create an environment variable on your system named
                DART_PASSWORD and set it to the password created earlier.
              </li>
              <li>
                Create an environment variable on your system named DART_DB and
                set it to ‘dart’. Note: You can use whatever name you want
              </li>
              <li>
                Create an environment variable on your system named DART_TEST_DB
                and set it to ‘darttest’. Note: You can use whatever name you
                want
              </li>
              <li>
                Open a new shell (to get the newly created environment
                variables) and run the following command from your COSMOS
                project configuration directory (not C:/COSMOS which contains
                Demo &amp; Vendor as that is the installation directory)
                <div class="language-plaintext highlighter-rouge">
                  <div class="highlight">
                    <pre class="highlight"><code>bundle exec rake db:schema:load
bundle exec rake db:seed
</code></pre>
                  </div>
                </div>
              </li>
            </ol>

            <div class="note warning">
              <h5>
                <a
                  class="anchor"
                  href="#other-possible-dependencies"
                  aria-hidden="true"
                  ><span class="octicon octicon-link"></span></a
                >Other possible dependencies
              </h5>
              <p>
                Depending on your platform other packages may be required. In
                particular the latest version of Ubuntu 18.04 requires libpq-dev
                and nodejs. Additionally you may need to edit pg_hba.conf and
                change from using the peer authentication method to md5 and
                restart postgres.
              </p>
            </div>

            <p>
              At this point the DART database is configured and ready to import
              COSMOS telemetry. When you start the COSMOS Demo you should see
              the new DART button in the Utilities section. If you’re upgrading
              from an older version of COSMOS simply add this line to your
              config/tools/launcher/launcher.txt file:
            </p>

            <div class="language-plaintext highlighter-rouge">
              <div class="highlight">
                <pre
                  class="highlight"
                ><code>TOOL "DART" "LAUNCH_TERMINAL Dart" "dart.png"
</code></pre>
              </div>
            </div>

            <p>
              Once you click the DART button you should see a new terminal open
              with the following:
            </p>

            <div class="language-plaintext highlighter-rouge">
              <div class="highlight">
                <pre
                  class="highlight"
                ><code>2018/04/03 16:00:30.269  INFO: Starting database cleanup...
2018/04/03 16:00:30.269  INFO: Cleaning up SystemConfig...
2018/04/03 16:00:30.373  INFO: Marshal load success: C:/git/COSMOS/demo/outputs/tmp/marshal_fee3ac209980cc7440182adbd1ce7eda.bin
2018/04/03 16:00:30.377  INFO: Cleaning up PacketLog...
2018/04/03 16:00:30.385  INFO: Cleaning up PacketConfig...
2018/04/03 16:00:30.392  INFO: Cleaning up PacketLogEntry...
2018/04/03 16:00:30.396  INFO: Cleaning up Decommutation tables (tX_Y)...
2018/04/03 16:00:30.396  INFO: Cleaning up Reductions...
2018/04/03 16:00:30.397  INFO: Database cleanup complete!
2018/04/03 16:00:30.397  INFO: Dart starting each process...
2018/04/03 16:00:30.397  INFO: Starting: ruby C:/git/cosmos/lib/cosmos/dart/processes/dart_ingester.rb
2018/04/03 16:00:30.411  INFO: Starting: ruby C:/git/cosmos/lib/cosmos/dart/processes/dart_reducer.rb
2018/04/03 16:00:30.424  INFO: Starting: ruby C:/git/cosmos/lib/cosmos/dart/processes/dart_stream_server.rb
2018/04/03 16:00:30.438  INFO: Starting: ruby C:/git/cosmos/lib/cosmos/dart/processes/dart_decom_server.rb
2018/04/03 16:00:30.453  INFO: Starting: ruby C:/git/cosmos/lib/cosmos/dart/processes/dart_worker.rb 0 1
2018/04/03 16:00:30.478  INFO: Dart Monitoring processes...
</code></pre>
              </div>
            </div>

            <p>
              This indicates that DART is now monitoring the Server waiting for
              packets. Note that sometimes it can take a while for output to
              appear in the window. If you now start the COSMOS Command and
              Telemetry Server, DART will start receiving and processing
              telemetry data.
            </p>

            <p>
              By default, DART writes log files in the COSMOS outputs/dart/logs
              directory. This directory can be changed by setting DART_LOGS in
              the config/system/system.txt file. Log files are created for each
              of the DART processes and are written to continuously as DART
              processes data and responds to user requests. By default, DART
              creates binary log files in the outputs/dart/data directory. This
              directory can be changed by setting DART_DATA in the
              config/system/system.txt file.
            </p>

            <div class="note warning">
              <h5>
                <a
                  class="anchor"
                  href="#changing-the-dart-data-file-directory"
                  aria-hidden="true"
                  ><span class="octicon octicon-link"></span></a
                >Changing the DART Data File Directory
              </h5>
              <p>
                DART indexes the files in outputs/dart/data. If these files are
                moved DART can no longer access them when responding to a Stream
                Server request (from Replay or Data Viewer). DART will not
                permanently delete them unless you start DART with the
                '--force-cleanup' option. Using that option will permanently
                delete the files and their associated decommutated data in the
                database.
              </p>
            </div>

            <div class="note warning">
              <h5>
                <a class="anchor" href="#shutting-down-dart" aria-hidden="true"
                  ><span class="octicon octicon-link"></span></a
                >Shutting Down DART
              </h5>
              <p>
                Always shutdown dart with Ctrl-C or a soft kill (kill -2). A
                hard kill will usually require database cleanup on the next
                startup of DART.
              </p>
            </div>
          </article>
        </div>

        <div class="unit one-fifth hide-on-mobiles">
          <aside>
            <ul>
              <!-- Ignore "posts" and "docs", we only want versioned collections -->
              <!-- prettier-ignore -->

              <!-- Ignore "posts" and "docs", we only want versioned collections -->
              <!-- prettier-ignore -->

              <li>

              <li>
                <!-- Only create links to collections which aren't our own  -->

                <a href="/docs/v5/">v5 Docs</a>

                <!-- Ignore "posts" and "docs", we only want versioned collections -->
                <!-- prettier-ignore -->
              </li>
            </ul>

            <!-- prettier-ignore -->

            <h4>Getting Started</h4>
            <!-- prettier-ignore -->
            <!-- prettier-ignore -->

            <ul>
  <!-- prettier-ignore -->
















































































































































































  <li class="">
    <a href="/docs/v4/tools">Tools</a>
  </li>
  <!-- prettier-ignore -->






































  <li class="">
    <a href="/docs/v4/installation">Installation</a>
  </li>
  <!-- prettier-ignore -->
























































































  <li class="">
    <a href="/docs/v4/upgrading">Upgrading and the Gemfile</a>
  </li>
  <!-- prettier-ignore -->




































































  <li class="">
    <a href="/docs/v4/structure">Directory structure</a>
  </li>
  <!-- prettier-ignore -->






























  <li class="">
    <a href="/docs/v4/gettingstarted">Getting Started</a>
  </li>
  <!-- prettier-ignore -->


























































































</ul>

            <h4>System Configuration</h4>
            <!-- prettier-ignore -->
            <!-- prettier-ignore -->

            <ul>
  <!-- prettier-ignore -->








































































  <li class="">
    <a href="/docs/v4/system">System Configuration</a>
  </li>
  <!-- prettier-ignore -->
















  <li class="">
    <a href="/docs/v4/command">Command Configuration</a>
  </li>
  <!-- prettier-ignore -->












































































  <li class="">
    <a href="/docs/v4/telemetry">Telemetry Configuration</a>
  </li>
  <!-- prettier-ignore -->








































  <li class="">
    <a href="/docs/v4/interfaces">Interface Configuration</a>
  </li>
  <!-- prettier-ignore -->
























































  <li class="">
    <a href="/docs/v4/protocols">Protocol Configuration</a>
  </li>
  <!-- prettier-ignore -->


























































































</ul>

            <h4>Tool Configuration</h4>
            <!-- prettier-ignore -->
            <!-- prettier-ignore -->

            <ul>
  <!-- prettier-ignore -->










  <li class="">
    <a href="/docs/v4/cmd-extractor">Command Extractor</a>
  </li>
  <!-- prettier-ignore -->










  <li class="">
    <a href="/docs/v4/cmd-sender">Command Sender</a>
  </li>
  <!-- prettier-ignore -->












  <li class="">
    <a href="/docs/v4/cmd-sequence">Command Sequence</a>
  </li>
  <!-- prettier-ignore -->














  <li class="">
    <a href="/docs/v4/cmd-tlm-server">Command and Telemetry Server</a>
  </li>
  <!-- prettier-ignore -->


















  <li class="">
    <a href="/docs/v4/config-editor">Config Editor</a>
  </li>
  <!-- prettier-ignore -->


























  <li class="">
    <a href="/docs/v4/data-viewer">Data Viewer</a>
  </li>
  <!-- prettier-ignore -->


































  <li class="">
    <a href="/docs/v4/handbook-creator">Handbook Creator</a>
  </li>
  <!-- prettier-ignore -->












































  <li class="">
    <a href="/docs/v4/launcher">Launcher</a>
  </li>
  <!-- prettier-ignore -->














































  <li class="">
    <a href="/docs/v4/limits-monitor">Limits Monitor</a>
  </li>
  <!-- prettier-ignore -->






















































  <li class="">
    <a href="/docs/v4/packet-viewer">Packet Viewer</a>
  </li>
  <!-- prettier-ignore -->


























































  <li class="">
    <a href="/docs/v4/replay">Replay</a>
  </li>
  <!-- prettier-ignore -->






























































  <li class="">
    <a href="/docs/v4/script-runner">Script Runner</a>
  </li>
  <!-- prettier-ignore -->










































































  <li class="">
    <a href="/docs/v4/table-manager">Table Manager</a>
  </li>
  <!-- prettier-ignore -->














































































  <li class="">
    <a href="/docs/v4/test-runner">Test Runner</a>
  </li>
  <!-- prettier-ignore -->
















































































  <li class="">
    <a href="/docs/v4/tlm-extractor">Telemetry Extractor</a>
  </li>
  <!-- prettier-ignore -->


















































































  <li class="">
    <a href="/docs/v4/tlm-grapher">Telemetry Grapher</a>
  </li>
  <!-- prettier-ignore -->




















































































  <li class="">
    <a href="/docs/v4/tlm-viewer">Telemetry Viewer</a>
  </li>
  <!-- prettier-ignore -->




























































  <li class="">
    <a href="/docs/v4/screens">Telemetry Screens</a>
  </li>
  <!-- prettier-ignore -->


</ul>

            <h4>DART</h4>
            <!-- prettier-ignore -->
            <!-- prettier-ignore -->

            <ul>
  <!-- prettier-ignore -->


























  <li class="">
    <a href="/docs/v4/dart-overview">DART Overview</a>
  </li>
  <!-- prettier-ignore -->






















  <li class="current">
    <a href="/docs/v4/dart-install">DART Installation</a>
  </li>
  <!-- prettier-ignore -->




















  <li class="">
    <a href="/docs/v4/dart-api">DART API</a>
  </li>
  <!-- prettier-ignore -->


</ul>

            <h4>User's Guides</h4>
            <!-- prettier-ignore -->
            <!-- prettier-ignore -->

            <ul>
  <!-- prettier-ignore -->


































































  <li class="">
    <a href="/docs/v4/scripting">Scripting Guide</a>
  </li>
  <!-- prettier-ignore -->


































































  <li class="">
    <a href="/docs/v4/scripting-best-practices">Scripting Best Practices</a>
  </li>
  <!-- prettier-ignore -->




























  <li class="">
    <a href="/docs/v4/gemtargets">Gem Based Targets and Tools</a>
  </li>
  <!-- prettier-ignore -->


</ul>

            <h4>Tips</h4>
            <!-- prettier-ignore -->
            <!-- prettier-ignore -->

            <ul>
  <!-- prettier-ignore -->








  <li class="">
    <a href="/docs/v4/chaining">Chaining CmdTlmServers</a>
  </li>
  <!-- prettier-ignore -->


</ul>

            <h4>Development</h4>
            <!-- prettier-ignore -->
            <!-- prettier-ignore -->

            <ul>
  <!-- prettier-ignore -->










































































  <li class="">
    <a href="/docs/v4/system-class">System Class</a>
  </li>
  <!-- prettier-ignore -->


















































  <li class="">
    <a href="/docs/v4/packet-class">Packet Class</a>
  </li>
  <!-- prettier-ignore -->




















































  <li class="">
    <a href="/docs/v4/packet-item-class">PacketItem Class</a>
  </li>
  <!-- prettier-ignore -->










































  <li class="">
    <a href="/docs/v4/json-api">JSON API</a>
  </li>
  <!-- prettier-ignore -->
















































  <li class="">
    <a href="/docs/v4/logging">Logging</a>
  </li>
  <!-- prettier-ignore -->


</ul>

            <!-- Every versioned site gets the unversioned Meta section -->
            <h4>Meta</h4>
            <ul>
              <li>
                <a href="/docs/contributing">Contributing</a>
              </li>

              <li>
                <a href="/docs/papers">Papers</a>
              </li>

              <li>
                <a href="/docs/requirements">Requirements and Design</a>
              </li>

              <li>
                <a href="/docs/xtce">XTCE Support</a>
              </li>
            </ul>
          </aside>
        </div>

        <div class="clear"></div>
      </div>
    </section>

    <script>
      (function () {
        var cx = "001663949569052626382:-enhin1layy";
        var gcse = document.createElement("script");
        gcse.type = "text/javascript";
        gcse.async = true;
        gcse.src = "https://cse.google.com/cse.js?cx=" + cx;
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <footer role="contentinfo">
      <div class="grid wider">
        <div class="unit one-third center-on-mobiles">
          <p>
            The contents of this website are &copy;&nbsp;2021
            <a href="http://www.ballaerospace.com/" target="_blank"
              >Ball Aerospace</a
            >
            under the terms of the
            <a
              href="https://github.com/BallAerospace/COSMOS/blob/cosmos4/LICENSE.txt"
              target="_blank"
              >GPLv3&nbsp;License</a
            >.
          </p>
          <p>
            Site design derived from the
            <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> project
            documentation which is licensed under the terms of the
            <a
              href="https://github.com/jekyll/jekyll/blob/master/LICENSE"
              target="_blank"
              >MIT License</a
            >.
          </p>
        </div>
        <div class="unit two-thirds align-right center-on-mobiles">
          <p>
            <gcse:search></gcse:search>
            Proudly hosted by
            <a href="https://github.com" target="_blank">
              <img
                src="/img/footer-logo.png"
                width="100"
                height="30"
                alt="GitHub Social coding"
              />
            </a>
          </p>
        </div>
      </div>
    </footer>

    <script>
      var anchorForId = function (id) {
        var anchor = document.createElement("a");
        anchor.className = "header-link";
        anchor.href = "#" + id;
        anchor.innerHTML =
          '<span class="sr-only">Permalink</span><i class="fa fa-link"></i>';
        anchor.title = "Permalink";
        return anchor;
      };

      var linkifyAnchors = function (level, containingElement) {
        var headers = containingElement.getElementsByTagName("h" + level);
        for (var h = 0; h < headers.length; h++) {
          var header = headers[h];

          if (typeof header.id !== "undefined" && header.id !== "") {
            header.appendChild(anchorForId(header.id));
          }
        }
      };

      document.onreadystatechange = function () {
        if (this.readyState === "complete") {
          var contentBlock =
            document.getElementsByClassName("docs")[0] ||
            document.getElementsByClassName("news")[0];
          if (!contentBlock) {
            return;
          }
          for (var level = 1; level <= 6; level++) {
            linkifyAnchors(level, contentBlock);
          }
        }
      };
    </script>

    <!-- Google Analytics (http://google.com/analytics) -->
    <script>
      !(function (j, e, k, y, l, L) {
        (j.GoogleAnalyticsObject = y),
          j[y] ||
            (j[y] = function () {
              (j[y].q = j[y].q || []).push(arguments);
            }),
          (j[y].l = +new Date()),
          (l = e.createElement(k)),
          (L = e.getElementsByTagName(k)[0]),
          (l.src = "//www.google-analytics.com/analytics.js"),
          L.parentNode.insertBefore(l, L);
      })(window, document, "script", "ga");

      ga("create", "UA-60103689-1", "cosmosc2.com");
      ga("send", "pageview");
    </script>
  </body>
</html>
